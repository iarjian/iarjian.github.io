<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>js-joi: 一个简易的js链式校验工具 | 风车</title>
<meta name="description" content="&lt;h3&gt;不知寒暑，不识香臭，不辨是非，&lt;br/&gt;无家国之念，无亲情之观，&lt;br/&gt;无喜乐，无悲欢，与朽木何异？&lt;/h3&gt;">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://iarjian.github.io/favicon.ico?v=1654071935335">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://iarjian.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://iarjian.github.io">
        <img src="https://iarjian.github.io/images/avatar.png?v=1654071935335" class="site-logo">
        <h1 class="site-title">风车</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/post/typescript/" class="site-nav">
            笔记
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      <h3>不知寒暑，不识香臭，不辨是非，<br/>无家国之念，无亲情之观，<br/>无喜乐，无悲欢，与朽木何异？</h3>
    </div>
    <div class="site-footer">
      Powered by <a href="https://iarjian.netlify.app" target="_blank">风车</a> | <a class="rss" href="https://iarjian.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">js-joi: 一个简易的js链式校验工具</h2>
            <div class="post-date">2019-10-17</div>
            
            <div class="post-content">
              <p>安装</p>
<pre><code class="language-js">npm install --save js-joi
</code></pre>
<p>api说明(设置label 则label会添加到错误信息前  this._label + message)</p>
<table>
<thead>
<tr>
<th>事件名称</th>
<th style="text-align:left">说明</th>
<th>参数</th>
<th style="text-align:center">默认提示</th>
</tr>
</thead>
<tbody>
<tr>
<td>.data()</td>
<td style="text-align:left">数据输入</td>
<td>(input)</td>
<td style="text-align:center">--</td>
</tr>
<tr>
<td>.label()</td>
<td style="text-align:left">标签输入</td>
<td>(label)</td>
<td style="text-align:center">--</td>
</tr>
<tr>
<td>.required()</td>
<td style="text-align:left">必填(不为空)</td>
<td>(message = '不为空')</td>
<td style="text-align:center">不为空</td>
</tr>
<tr>
<td>.mobile()</td>
<td style="text-align:left">中国手机号</td>
<td>(message = '手机号不正确')</td>
<td style="text-align:center">手机号不正确</td>
</tr>
<tr>
<td>.email()</td>
<td style="text-align:left">邮箱</td>
<td>(message = '格式不正确')</td>
<td style="text-align:center">格式不正确</td>
</tr>
<tr>
<td>.images()</td>
<td style="text-align:left">匹配图片</td>
<td>(message = '未知图片格式')</td>
<td style="text-align:center">未知图片格式</td>
</tr>
<tr>
<td>.video()</td>
<td style="text-align:left">匹配视频</td>
<td>(message = '未知视频格式')</td>
<td style="text-align:center">未知视频格式</td>
</tr>
<tr>
<td>.ID()</td>
<td style="text-align:left">身份证号 二代身份证号(18位数字),<br />最后一位是校验位,可能为数字或字符X</td>
<td>(message = '身份证不合法')</td>
<td style="text-align:center">身份证不合法</td>
</tr>
<tr>
<td>.integet()</td>
<td style="text-align:left">整数</td>
<td>(message = '必须为整数')</td>
<td style="text-align:center">必须为整数</td>
</tr>
<tr>
<td>.number()</td>
<td style="text-align:left">数字</td>
<td>(message = '必须数字格式')</td>
<td style="text-align:center">必须数字格式</td>
</tr>
<tr>
<td>.letter()</td>
<td style="text-align:left">字母</td>
<td>(message = '必须是英文')</td>
<td style="text-align:center">必须是英文</td>
</tr>
<tr>
<td>.chinese()</td>
<td style="text-align:left">中文</td>
<td>(message = '必须是中文')</td>
<td style="text-align:center">必须是中文</td>
</tr>
<tr>
<td>.enum()</td>
<td style="text-align:left">枚举</td>
<td>(arr = [], message = <code>值必须为${arr.join(',')}中的一个</code>)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>.min()</td>
<td style="text-align:left">最小值</td>
<td>(num = 0, message = <code>最小值为${num}</code>)</td>
<td style="text-align:center">最小值为0</td>
</tr>
<tr>
<td>.max()</td>
<td style="text-align:left">最大值</td>
<td>(num = 100, message = <code>最大值为${num}</code>)</td>
<td style="text-align:center">最大值为100</td>
</tr>
<tr>
<td>.minLength()</td>
<td style="text-align:left">最小长度</td>
<td>(length = 6, message = <code>长度不能小于${length}位</code>)</td>
<td style="text-align:center">长度不能小于6位</td>
</tr>
<tr>
<td>.maxLength()</td>
<td style="text-align:left">最大长度</td>
<td>(length = 6, message = <code>长度不能大于${length}位</code>)</td>
<td style="text-align:center">长度不能大于6位</td>
</tr>
<tr>
<td>.length()</td>
<td style="text-align:left">固定长度</td>
<td>(length = 6, message = <code>长度必须为${length}位</code>)</td>
<td style="text-align:center">长度必须为6位</td>
</tr>
<tr>
<td>.currency()</td>
<td style="text-align:left">数字/货币金额<br />（支持负数、千分位分隔符）</td>
<td>(message = '格式不正确')</td>
<td style="text-align:center">格式不正确</td>
</tr>
<tr>
<td>.Pcurrency()</td>
<td style="text-align:left">数字/货币金额<br /> (只支持正数、不支持校验千分位分隔符)</td>
<td>(message = '格式不正确')</td>
<td style="text-align:center">格式不正确</td>
</tr>
<tr>
<td>.judge()</td>
<td style="text-align:left">自定义判断条件校验(传入条件进行判断)</td>
<td>(condition:Boolean, message = '条件不正确')</td>
<td style="text-align:center">条件不正确</td>
</tr>
<tr>
<td>.regExp()</td>
<td style="text-align:left">自定义正则校验</td>
<td>(reg, message = '格式不正确')</td>
<td style="text-align:center">格式不正确</td>
</tr>
</tbody>
</table>
<p>使用：</p>
<pre><code>import Joi from 'js-joi'
</code></pre>
<p>多数据同时验证</p>
<pre><code>const validJoi = new Joi()
validJoi
    .data('1234')
    .label('id')  // 设置label 则label会添加到错误信息前
    .required('不能为空')
    .minLength(3, '不能少于3位')
    .maxLength(5, '不能多于5位')

    // .data('1234')
    // 不设置label 则错误信息完全定制 需要输入完整错误信息
    // .required('id不能为空')

    .data('1234@qq.')
    .label('邮箱')
    .required('不能为空')
    .email('格式不正确')

    .data(13100000000)
    .label('电话号码')
    .required('不能为空')
    .mobile('电话号码输入错误')

if (!validJoi.pass) {
    // 打印错误信息
    console.log(validJoi.errorMessage)
    
    // 调用弹窗组件提示错误信息
    // this.$message.error(validJoi.errorMessage)
    return
}
</code></pre>
<p>当然你只校验一个字段的话也可以这么使用：</p>
<pre><code>const idJoi = new Joi('1234', '数据')
idJoi
    .required('不能为空')
    .min(3, '不小于3')
    .max(1024, '不大于1024')
    .email('邮箱格式不正确')
    .regexp(/012345/, '格式错误')
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://iarjian.github.io/tag/bf99ITS_w/" class="tag">
                    js-joi
                  </a>
                
                  <a href="https://iarjian.github.io/tag/0zOcNNNNS/" class="tag">
                    链式校验工具
                  </a>
                
              </div>
            
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
